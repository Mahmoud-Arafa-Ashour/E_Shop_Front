<div class="container-fluid">
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">E-Shop</a>
      <div class="navbar-nav ms-auto">
        <div class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown">
            Welcome, {{ currentUser?.name }}
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" (click)="logout()">Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <div class="container">
    <!-- Back Button -->
    <div class="row mb-4">
      <div class="col-12">
        <button class="btn btn-outline-secondary" (click)="goBack()">
          <i class="bi bi-arrow-left me-2"></i>Back to Products
        </button>
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
      {{ errorMessage }}
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="text-center py-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-2 text-muted">Loading product details...</p>
    </div>

    <!-- Product Details -->
    <div *ngIf="!isLoading && product" class="row">
      <div class="col-lg-8">
        <div class="card shadow">
          <div class="card-body p-4">
            <!-- Product Image -->
            <div class="row mb-4">
              <div class="col-md-6">
                <div class="bg-light d-flex align-items-center justify-content-center" 
                     style="height: 300px; border-radius: 8px;">
                  <img *ngIf="product.imagePath" 
                       [src]="product.imagePath" 
                       [alt]="product.name"
                       class="img-fluid" 
                       style="max-height: 100%; object-fit: cover; border-radius: 8px;">
                  <div *ngIf="!product.imagePath" class="text-muted text-center">
                    <i class="bi bi-image fs-1"></i>
                    <p class="mt-2">No Image Available</p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <h1 class="h2 mb-3">{{ product.name }}</h1>
                <h3 class="text-primary mb-4">${{ product.price | number:'1.2-2' }}</h3>
                <p class="text-muted mb-4">{{ product.description }}</p>
                
                <!-- Action Buttons -->
                <div class="d-grid gap-2 d-md-block">
                  <button class="btn btn-warning me-2" (click)="editProduct()">
                    <i class="bi bi-pencil me-2"></i>Edit Product
                  </button>
                  <button class="btn btn-danger" (click)="deleteProduct()">
                    <i class="bi bi-trash me-2"></i>Delete Product
                  </button>
                </div>
              </div>
            </div>

            <!-- Product Information -->
            <div class="row">
              <div class="col-12">
                <h4 class="mb-3">Product Information</h4>
                <div class="table-responsive">
                  <table class="table table-striped">
                    <tbody>
                      <tr>
                        <td class="fw-semibold">Product ID</td>
                        <td>{{ product.id }}</td>
                      </tr>
                      <tr>
                        <td class="fw-semibold">Name</td>
                        <td>{{ product.name }}</td>
                      </tr>
                      <tr>
                        <td class="fw-semibold">Description</td>
                        <td>{{ product.description }}</td>
                      </tr>
                      <tr>
                        <td class="fw-semibold">Price</td>
                        <td class="text-primary fw-bold">${{ product.price | number:'1.2-2' }}</td>
                      </tr>
                      <tr>
                        <td class="fw-semibold">Image</td>
                        <td>
                          <span *ngIf="product.imagePath" class="text-success">
                            <i class="bi bi-check-circle me-2"></i>Image Available
                          </span>
                          <span *ngIf="!product.imagePath" class="text-muted">
                            <i class="bi bi-x-circle me-2"></i>No Image
                          </span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions Sidebar -->
      <div class="col-lg-4">
        <div class="card shadow">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Quick Actions</h5>
          </div>
          <div class="card-body">
            <div class="d-grid gap-2">
              <button class="btn btn-outline-primary" (click)="editProduct()">
                <i class="bi bi-pencil me-2"></i>Edit Product
              </button>
              <button class="btn btn-outline-danger" (click)="deleteProduct()">
                <i class="bi bi-trash me-2"></i>Delete Product
              </button>
              <button class="btn btn-outline-secondary" (click)="goBack()">
                <i class="bi bi-arrow-left me-2"></i>Back to Products
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Product Not Found -->
    <div *ngIf="!isLoading && !product" class="text-center py-5">
      <div class="mb-4">
        <i class="bi bi-exclamation-triangle fs-1 text-warning"></i>
      </div>
      <h3 class="text-muted">Product Not Found</h3>
      <p class="text-muted mb-4">The product you're looking for doesn't exist or has been removed.</p>
      <button class="btn btn-primary" (click)="goBack()">
        <i class="bi bi-arrow-left me-2"></i>Back to Products
      </button>
    </div>
  </div>
</div>
